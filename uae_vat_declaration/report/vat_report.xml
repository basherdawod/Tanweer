<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_contract_template">
        <t t-call="web.html_container">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    
                    <div class="page" style="padding:10px;">
                    <t t-foreach="docs" t-as="o">
                   
                        <td>
                            <div style="font-weight: bold; color: #000000; text-align: center;">
                                <h4 style="width: 100%; height: 30%;background-color: #d3d3d3;font-weight: bold; color: #000; text-align: center; padding: 10px ">
                                    VAT 201 Return - 
                                    إقرار ضريبة القيمة المضافة 
                                </h4>
                            </div>
                                       


                            <hr style="border: 2px solid black; width: 100%; margin: 10px 0;" />
                        <div style="width: 100%;text-align: right;margin-right:20px;direction:ltr;">
                            <div class="row">
                               
                                <div class="col-6" style="text-align: left;">Ref <t t-esc="o.name"/></div>
                                <div class="col-6" style="text-align: right;">الفترة من: <t t-esc="o.date_from.strftime('%d %b %Y')"/> إلى: <t t-esc="o.date_to.strftime('%d %b %Y')"/></div>
                            </div>
                            <br/><br/>
                            <div class="row">
                                <div class="col-6" style='width: 100%;text-align: left;'>TRN <span style='text-align: right;direction:rtl;'><t t-esc="o.vat_registration_id.company_vat"/></span></div>
                                <div class="col-6" style="font-weight: bold; color: #000000;">تاريخ التسجيل الفعلي :  <t t-esc="o.effective_reg_date"/></div>
                            </div>
                            <br/><br/>
                            <div style="font-weight: bold; color: #000000;">الاسم القانوني للكيان باللغة الإنجليزية: <t t-esc="o.legal_name"/></div>
                            <br/><br/>
                            <div style="font-weight: bold; color: #000000;">الاسم القانوني للكيان باللغة  العربية : <t t-esc="o.vat_registration_id.legal_name_arabic"/></div>
                            <br/><br/>
                            
                        </div>
                                <br/><br/>
                                <hr style="border: 2px solid black; width: 100%; margin: 10px 0;" />
                                <br/><br/>
                            <table border="2" style="width: 100%;padding: 10px;">
                                <thead style="background-color: #d3d3d3;">
                                    <tr>
                                        <th style="width: 40%; text-align:left;padding: 10px;">Description<br/>وصف</th>
                                        <th style="width: 20%; text-align:right;padding: 10px;">Amount(AED)<br/>المبلغ درهم</th>
                                        <th style="width: 20%;text-align:right;padding: 10px;">VAT Amount(AED)<br/>قسمة ضريبة القيمة المضافة (درهم)</th>
                                        <th style="width: 20%;text-align:right;padding: 10px;">Adjstment(AED)<br/>تسوية(درهم )</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="total_amount_sale" t-value="0"/>
                                    <t t-set="total_taxamount_sele" t-value="0"/>
                                    <t t-foreach="o.vat_sales_outputs" t-as="line">
                                        <t t-if="line.line_type == 'sale'">
                                            <t t-set="total_amount_sale" t-value="total_amount_sale + (line.amount or 0)"/>
                                            <t t-set="total_taxamount_sele" t-value="total_taxamount_sele + (line.taxamount or 0)"/>
                                            <tr>
                                                <td style="text-align: left; padding: 10px;">
                                                    <t t-esc="line.description"/>
                                                </td>
                                                <td style="text-align: right; padding: 10px;">
                                                    <t t-esc="line.amount"/>
                                                </td>
                                                <td style="text-align: right; padding: 10px;">
                                                    <t t-esc="line.taxamount"/>
                                                </td>
                                                <td style="text-align: right; padding: 10px;">
                                                    <t t-esc="line.adjustment"/>
                                                </td>
                                            </tr>

                                        </t>
                                    </t>
                                    <tr>
                                        <td style="text-align: left; padding: 10px;">8 Total<br/>المجموع</td>
                                        <td style="text-align: center; padding: 10px;"><t t-esc="total_amount_sale"/></td>
                                        <td style="text-align: center; padding: 10px;"><t t-esc="total_taxamount_sele"/></td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                            <br/><br/>
                           <div style="width: 100%; height: 30%;background-color: #d3d3d3;font-weight: bold; color: #000; text-align:left; padding: 10px ">
                                <span>VAT on Expenses and All Other outputs</span>
                                <br/>
                                <span >ضريبة القيمة المضافة علي المبيعات وجميع المخرجات الأخرى</span>
                            </div>
                             <table border="2" style="width: 100%;padding: 10px;">
                                <thead>
                                    <tr>
                                        <th style="width: 40%;text-align:left;padding: 10px;">Description<br/>وصف</th>
                                        <th style="width: 20%;text-align:right;padding: 10px;">Amount(AED)<br/>المبلغ درهم</th>
                                        <th style="width: 20%;text-align:right;padding: 10px;">VAT Amount(AED)<br/>قسمة ضريبة القيمة المضافة (درهم)</th>
                                        <th style="width: 20%;text-align:right;padding: 10px;">Adjstment(AED)<br/>تسوية(درهم )</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="total_amount_exp" t-value="0"/>
                                    <t t-set="total_taxamount_exp" t-value="0"/>
                                    <t t-foreach="o.vat_sales_outputs" t-as="line">
                                        <t t-if="line.line_type == 'purchase'">
                                            <t t-set="total_amount_exp" t-value="total_amount_exp + (line.amount or 0)"/>
                                            <t t-set="total_taxamount_exp" t-value="total_taxamount_exp + (line.taxamount or 0)"/>
                                            <tr>
                                                <td style="text-align: left; padding: 10px;">
                                                    <t t-esc="line.description"/>
                                                </td>
                                                <td style="text-align: right; padding: 10px;">
                                                    <t t-esc="line.amount"/>
                                                </td>
                                                <td style="text-align: right; padding: 10px;">
                                                    <t t-esc="line.taxamount"/>
                                                </td>
                                                <td style="text-align: right; padding: 10px;">
                                                    <t t-esc="line.adjustment"/>
                                                </td>
                                            </tr>
                                            
                                        </t>

                                    </t>
                                    <tr>
                                        <td style="text-align: left; padding: 10px;">11 Total<br/>المجموع</td>
                                        <td style="text-align: center; padding: 10px;"><t t-esc="total_amount_exp" /></td>
                                        <td style="text-align: center; padding: 10px;"><t t-esc="total_taxamount_exp"/></td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                            <br/><br/><br/><br/><br/><br/>

                            <table border="2" style="width: 70%;padding: 10px;">
                                <thead>
                                    <tr>
                                        <th style="width: 40%; text-align: left;padding: 10px;">Net VAT Due<br/>صافي ضريبة القيمة المضافة المستحقة</th>
                                        <th style="width: 20%;text-align:right;padding: 10px;">Amount(AED)<br/>المبلغ درهم</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="due_sele" t-value="total_amount_sale + total_amount_exp"/>
                                    <t t-set="due_exp" t-value="total_taxamount_sele + total_taxamount_exp"/>
                                    <t t-set="due" t-value="total_taxamount_sele - total_taxamount_exp"/>
                                    <tr>
                                        <td style=" text-align: left;padding: 10px;">12 Total Value of due tax for the period <br/> إجمالي قيمة الضريبة المستحقة عن الفترة بالدرهم</td>
                                        <td style=" text-align: right;padding: 10px;"><t t-esc="total_taxamount_sele" /></td>
                                    </tr>
                                    <tr>
                                        <td style=" text-align: left;padding: 10px;">13 Total Value of recoverable0 tax for the period <br/> إجمالي قيمة الضريبة القابلة عن الفترة بالدرهم</td>
                                        <td style=" text-align: right;padding: 10px;"><t t-esc="total_taxamount_exp" /></td>
                                    </tr>
                                    <tr>
                                        <td style=" text-align: left;padding: 10px;">14 Payable tax for the period<br/> 
                                        الضريبة مستحقة الدفع عن الفترة (دىرهم)
                                        </td>
                                        <!-- <td style=" text-align: right;padding: 10px;"><t t-esc="('({})'.format(due) if 0 > due else due)"/></td> -->
                                        <td style="text-align: right; padding: 10px;"><t t-esc="('({})'.format(abs(due)) if due &lt; 0 else due)"/></td>

                                    </tr>
                                </tbody>
                            </table>
                            </td>
                            <br/><br/>
                            <br/><br/>
                            <div style="font-weight: bold; color: #000000; text-align:left;"><t t-esc="o.current_datetime"/></div>

                    </t>
                  </div>
            
                </t>
            </t>
        </t>
    </template>
</odoo>
